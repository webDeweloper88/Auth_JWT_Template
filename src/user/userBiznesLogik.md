# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è UserModule

## üéØ –¶–µ–ª—å UserModule

`UserModule` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –ø–æ—Å–ª–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã).

## üí° –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª UserModule)

### üì• –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:

- **GET /users** ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä).
- **GET /users/:id** ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø–æ ID (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä).
- **GET /users/me** ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏).

### ‚úèÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è:

- **PATCH /users/me** ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `firstName`, `photo`, `phone`, `username`, `birthDate`, `gender` –∏ —Ç.–¥.).
- **PATCH /users/:id/role** ‚Äî –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä).
- **PATCH /users/:id/status** ‚Äî –ê–∫—Ç–∏–≤–∞—Ü–∏—è, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–ª–∏ –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä).

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

- **PATCH /users/me/password** ‚Äî –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–∞—Ä–æ–ª—è).
- **POST /users/me/2fa/enable** ‚Äî –í–∫–ª—é—á–µ–Ω–∏–µ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (2FA).
- **POST /users/me/2fa/verify** ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ 2FA.

### üìà –õ–æ–≥–∏ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:

- **GET /users/me/access-logs** ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤—Ö–æ–¥–æ–≤.
- **GET /users/:id/sessions** ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **DELETE /users/:id/sessions/:sessionId** ‚Äî –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–µ—Å—Å–∏–∏.

## üß© –†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø

| Endpoint                | –£—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞                    |
| ----------------------- | ---------------------------------- |
| `/users`                | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä               |
| `/users/:id`            | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä               |
| `/users/me`             | –õ—é–±–æ–π –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å  |
| `/users/me/update`      | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å                       |
| `/users/:id/role`       | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä               |
| `/users/me/access-logs` | –¢–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å                |
| `/users/:id/sessions`   | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏–ª–∏ —Å–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ UserModule

| –§–∞–π–ª / –°–ª–æ–π          | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                |
| -------------------- | ----------------------------------------- |
| `user.service.ts`    | –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö    |
| `user.controller.ts` | –ú–∞—Ä—à—Ä—É—Ç—ã –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (guards)           |
| `dto/`               | –¢–∏–ø–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤                |
| `entities/`          | –ö–ª–∞—Å—Å—ã –º–æ–¥–µ–ª–µ–π (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)          |
| `guards/`            | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π (`RolesGuard`, `JwtGuard`) |

## ‚úÖ –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

1. **GET** `/users`, `/users/:id`, `/users/me`
2. **PATCH** `/users/me` + DTO
3. **PATCH** `/users/me/password`
4. **PATCH** `/users/:id/role` (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
5. **GET** `/users/me/access-logs` (–±—É–¥—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
6. **GET** `/users/:id/sessions`
